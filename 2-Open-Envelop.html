<!DOCTYPE html>
<html style="font-size: 16px;" lang="en">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>2 Open Envelop</title>

    <link rel="stylesheet" href="nicepage.css" media="screen">
    <link rel="stylesheet" href="2-Open-Envelop.css" media="screen">

    <!-- Speed up Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Preload the hero envelope image so it starts ASAP -->
    <link
      rel="preload"
      as="image"
      href="images/ChatGPTImageOct8202503_49_57PM23.png"
      fetchpriority="high"
      imagesizes="(max-width: 768px) 88vw, 600px"
    >

    <!-- Hint the browser about the audio host DNS -->
    <link rel="dns-prefetch" href="https://raw.githubusercontent.com">

    <!-- ADDED: lock envelope orientation -->
    <style id="wm-no-flip">
      /* Never allow the envelope image to be mirrored or rotated */
      .u-section-1 .u-image-1 {
        transform: scaleX(1) scaleY(1) rotate(0deg) !important;
        transform-origin: center center !important;
      }
      /* If an animation class tries to inject a transform, keep it neutral */
      .u-section-1 .u-image-1[data-animation-name],
      .u-section-1 .u-image-1.u-animate,
      .u-section-1 .u-image-1.u-animating {
        transform: translate3d(0,0,0) scale(1) rotate(0deg) !important;
      }
      /* Neutralize possible Nicepage flip classes */
      .u-section-1 .u-image-1.u-flip-horizontal,
      .u-section-1 .u-image-1.u-flip-vertical {
        transform: scaleX(1) scaleY(1) rotate(0deg) !important;
      }
    </style>

    <!-- Defer work below the hero -->
    <style id="wm-content-visibility">
      header ~ section:not(#block-1){
        content-visibility: auto;
        contain-intrinsic-size: 1200px 800px; /* rough placeholder; tune if you want */
      }
    </style>

    <!-- Tiny preloader styles -->
    <style id="wm-lite-preloader-css">
      #wm-lite-preloader{
        position:fixed; inset:0; z-index:99999;
        display:grid; place-items:center;
        background:
          radial-gradient(120% 120% at 50% 20%, rgba(255,255,255,.85), rgba(246,241,232,.98)),
          linear-gradient(#faf6ee, #f2ebdf);
        transition: opacity .35s ease;
      }
      #wm-lite-preloader.is-done{ opacity:0; pointer-events:none; }
      #wm-lite-preloader .wmlp-wrap{
        text-align:center;
        font-family:"Playfair Display", serif;
        color:#2d2a26;
      }
      #wm-lite-preloader .wmlp-logo{
        width:min(120px, 32vw); height:auto; opacity:.95;
        filter: drop-shadow(0 6px 18px rgba(0,0,0,.08));
        margin-bottom:16px;
      }
      #wm-lite-preloader .wmlp-bar{
        position:relative; width:min(280px, 70vw); height:6px;
        background:rgba(0,0,0,.08); border-radius:999px; overflow:hidden; margin:10px auto 6px;
      }
      #wm-lite-preloader .wmlp-bar i{
        position:absolute; inset:0; width:40%;
        background: linear-gradient(90deg, transparent, rgba(199,167,64,.35), transparent);
        animation:wmlp-scan 1.1s linear infinite;
      }
      @keyframes wmlp-scan{
        0%{transform:translateX(-60%)}
        100%{transform:translateX(160%)}
      }
      #wm-lite-preloader .wmlp-tip{ font-size:.95rem; opacity:.7; }
    </style>

    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 7.15.3, nicepage.com">

    <link
      id="u-page-google-font"
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Roboto:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&amp;family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900"
    >

    <script type="application/ld+json">
      {
        "@context": "http://schema.org",
        "@type": "Organization",
        "name": "",
        "logo": "images/ChatGPTImageOct8202503_49_57PM74.png"
      }
    </script>

    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="2 Open Envelop">
    <meta property="og:type" content="website">
    <meta data-intl-tel-input-cdn-path="intlTelInput/">
  </head>

  <body data-path-to-root="./" data-include-products="false" class="u-body u-clearfix u-overlap u-xl-mode" data-lang="en">

    <!-- Tiny preloader markup (first in <body>) -->
    <div id="wm-lite-preloader" aria-hidden="true">
      <div class="wmlp-wrap">
        <img class="wmlp-logo" src="images/ChatGPTImageOct8202503_49_57PM74.png" alt="">
        <div class="wmlp-bar"><i></i></div>
        <div class="wmlp-tip">Loading…</div>
      </div>
    </div>

    <header class="u-clearfix u-header u-header" id="header">
      <div class="u-clearfix u-sheet u-valign-middle-lg u-valign-middle-md u-valign-middle-sm u-valign-top-xl u-sheet-1">
        <a href="#" class="u-align-center u-image u-logo u-image-1" data-image-width="1024" data-image-height="1536">
          <img
            src="images/ChatGPTImageOct8202503_49_57PM74.png"
            class="u-logo-image u-logo-image-1"
            alt="Logo"
            width="1024" height="1536"
            decoding="async"
            loading="lazy"
          >
        </a>
      </div>
    </header>

    <section
      class="u-clearfix u-image u-valign-bottom-lg u-valign-bottom-md u-section-1"
      id="block-1"
      data-image-width="1024"
      data-image-height="1024"
    >
      <!-- HERO: prioritized envelope image -->
      <img
        class="custom-expanded u-image u-image-contain u-image-default u-image-1"
        src="images/ChatGPTImageOct8202503_49_57PM23.png"
        alt="Envelope"
        width="1024" height="1536"
        decoding="async"
        fetchpriority="high"
        loading="eager"
        style="content-visibility:auto; contain-intrinsic-size: 768px 1152px;"
        data-animation-name="customAnimationIn"
        data-animation-duration="3000"
        data-animation-delay="0"
      >

      <!-- English language circle -->
      <div
        class="infinite u-container-style u-group u-hover-feature u-preserve-proportions u-shading u-shape-circle u-group-1"
        data-animation-name="pulse"
        data-animation-duration="1500"
        data-animation-delay="0"
        data-href="3-English.html"
        data-page-id="145609453"
        title="Page 5"
        data-animation-direction=""
      >
        <div class="u-container-layout u-container-layout-1">
          <h4 class="u-align-center u-custom-font u-font-playfair-display u-text u-text-1">
            CLICK HERE FOR&nbsp;&nbsp;
          </h4>
          <h3
            class="u-align-center u-custom-font u-font-playfair-display u-text u-text-default u-text-2"
            data-animation-out="0"
          >
            English
          </h3>
        </div>
      </div>

      <img
        class="u-image u-image-contain u-image-default u-preserve-proportions u-image-2"
        src="images/animated-bird-image-0085.gif"
        alt=""
        width="65" height="58"
        decoding="async"
        loading="lazy"
        data-animation-name="customAnimationIn"
        data-animation-duration="3000"
        data-animation-delay="0"
      >

      <!-- Catalan language circle -->
      <div
        class="infinite u-container-style u-group u-hover-feature u-preserve-proportions u-shading u-shape-circle u-group-2"
        data-animation-name="pulse"
        data-animation-duration="1500"
        data-animation-delay="0"
        data-href="4-Spanish.html"
        data-page-id="992604958"
        title="Page 1"
        data-animation-direction=""
      >
        <div class="u-container-layout u-container-layout-2">
          <h4 class="u-align-center u-custom-font u-font-playfair-display u-text u-text-3">
           CLICA AQUÍ PER A
          </h4>
          <h3
            class="u-align-center u-custom-font u-font-playfair-display u-text u-text-default-lg u-text-default-md u-text-default-sm u-text-default-xl u-text-4"
            data-animation-out="0"
          >
            Catalan&nbsp;
          </h3>
          <img
            class="u-image u-image-contain u-image-default u-preserve-proportions u-image-3"
            src="images/animated-butterfly-image-0079.gif"
            alt=""
            width="100" height="100"
            decoding="async"
            loading="lazy"
          >
        </div>
      </div>
    </section>

    <!-- Optional: Nicepage SPA bundle -->
    <script defer src="js/wm-pack.js"></script>

    <!-- Speaker button look (single, de-duped) -->
    <style>
      #toggle-audio.wm-speaker{
        position:fixed; right:16px; bottom:16px; z-index:99999;
        width:54px; height:54px; border:none; border-radius:50%;
        display:grid; place-items:center; padding:0;
        background:rgba(255,255,255,.88);
        box-shadow:0 8px 18px rgba(0,0,0,.18), inset 0 0 0 1px rgba(0,0,0,.06);
        backdrop-filter:blur(6px);
      }
      #toggle-audio.wm-speaker svg{
        width:22px; height:22px; display:block;
      }
      #toggle-audio.wm-speaker.playing::before{
        content:""; position:absolute; inset:-10px; border-radius:999px;
        background:radial-gradient(circle, rgba(62,47,28,.18) 0%, rgba(62,47,28,0) 60%);
        animation:wmRing 2.6s ease-out infinite;
      }
      @keyframes wmRing{
        0%{opacity:.22; transform:scale(.9)}
        70%{opacity:.06}
        100%{opacity:0; transform:scale(1.25)}
      }
    </style>

    <!-- (Optional) Footer styling, if/when you add the footer markup -->
    <style>
      .wm-footer--bar{
        --accent: 96,116,87;       /* #607457 */
        --text: 248,248,248;       /* near-white text */
        --pad-y: 20px;
        --pad-x: 22px;
        --blur: 6px;

        position: fixed;
        left: 0; right: 0; bottom: 0;
        z-index: 9999;
        color: rgba(var(--text), .95);
        backdrop-filter: blur(var(--blur)) saturate(115%);
        -webkit-backdrop-filter: blur(var(--blur)) saturate(115%);
        background:
          linear-gradient(180deg,
            rgba(var(--accent), .88) 0%,
            rgba(var(--accent), .82) 60%,
            rgba(var(--accent), .80) 100%);
        box-shadow:
          0 -22px 50px rgba(0,0,0,.18) inset,
          0 -1px 0 rgba(255,255,255,.25) inset;
        border-top: 1px solid rgba(255,255,255,.18);
        padding: var(--pad-y) 0;
        font: 12.5px/1.4 ui-sans-serif, system-ui, -apple-system,
              Segoe UI, Roboto, "Playfair Display", serif;
      }

      .wmf-inner{
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 var(--pad-x);
        display: grid;
        grid-template-columns: 1fr auto 1fr; /* spacer | center | right */
        align-items: center;
        gap: 12px;
      }

      .wmf-center{
        justify-self: center;
        text-align: center;
      }
      .wmf-brand{
        font-family: "Playfair Display", serif;
        font-size: 16px;
        letter-spacing: 0.3px;
        font-weight: 400;
      }
      .wmf-sep{
        padding: 0 8px;
        opacity: .75;
      }
      .wmf-locdate{
        font-family: "Playfair Display", serif;
        font-size: 12px;
        letter-spacing: 0.3px;
        font-weight: 200;
      }

      .wmf-right{
        justify-self: end;
        opacity: .9;
        font-size: 12.5px;
      }

      @media (max-width: 640px){
        .wmf-inner{
          grid-template-columns: 1fr auto 1fr;
          gap: 6px;
        }
        .wmf-brand{ font-size: 16px; }
        .wmf-locdate{
          display: block;
          margin-top: 2px;
          font-size: 12px;
        }
        .wmf-right{ display: none; }
      }
    </style>

    <!-- === Global Audio Manager (lazy src, shared across pages) === -->
    <script>
      /* Boot guard so audio init won't double-run in SPA transitions */
      if (!window.__wmAudioBooted) { window.__wmAudioBooted = true;
      (() => {
        const AUDIO_SRC  = 'https://raw.githubusercontent.com/Max-Angula/wedding-audio/main/Hot%20Chip%20%E2%80%93%20Devotion.mp3';
        const TARGET_VOL = 0.85;

        const K = {
          approved: 'wmAudioApproved',
          playing:  'wmAudioPlaying',
          anchor:   'wmAudioAnchorMs',
          lastT:    'wmAudioLastSec'
        };

        const get = (k, d=null) => {
          try { return localStorage.getItem(k) ?? d; } catch { return d; }
        };
        const set = (k, v) => {
          try { localStorage.setItem(k, v); } catch {}
        };

        const approved      = () => get(K.approved) === '1';
        const setApproved   = v => set(K.approved, v ? '1':'0');
        const wantsPlaying  = () => get(K.playing, '1') === '1';
        const setWantsPlay  = v => set(K.playing, v ? '1':'0');
        const getAnchor     = () => {
          const v = parseInt(get(K.anchor) || '', 10);
          return isFinite(v) ? v : null;
        };
        const setAnchor     = ms => set(K.anchor, String(ms));
        const getLastT      = () => {
          const v = parseFloat(get(K.lastT) || '');
          return isFinite(v) ? v : 0;
        };
        const setLastT      = sec => set(K.lastT, String(Math.max(0, sec|0)));

        function ensureAudio(){
          let a = document.getElementById('wm-audio');
          if (!a) {
            a = document.createElement('audio');
            a.id = 'wm-audio';
            a.preload = 'none';   // no network until needed
            a.loop = true;
            a.autoplay = false;
            a.playsInline = true;
            a.crossOrigin = 'anonymous';
            // src set lazily when first played
            document.body.appendChild(a);
          }
          return a;
        }

        function fadeTo(audio, toVol, ms=600){
          const from  = audio.volume ?? 0;
          const start = performance.now();
          const step  = (t) => {
            const k = Math.min(1, (t - start) / ms);
            try { audio.volume = from + (toVol - from) * k; } catch {}
            if (k < 1) requestAnimationFrame(step);
          };
          requestAnimationFrame(step);
        }

        function computeCurrentTime(duration) {
          const now    = Date.now();
          const anchor = getAnchor();
          if (anchor && duration && isFinite(duration) && duration > 1) {
            const elapsed = Math.max(0, (now - anchor) / 1000);
            return elapsed % duration;
          }
          return getLastT();
        }

        async function loadSrcIfNeeded(audio){
          if (!audio.src) {
            audio.src = AUDIO_SRC;
            try { await audio.load?.(); } catch {}
          }
        }

        async function startPlayback(audio){
          await loadSrcIfNeeded(audio);
          if (!approved()) {
            setApproved(true);
            setAnchor(Date.now() - Math.floor(audio.currentTime || 0) * 1000);
          }
          try {
            audio.volume = 0.0;
            await audio.play();
            setWantsPlay(true);
            fadeTo(audio, TARGET_VOL, 900);
          } catch {}
        }

        function wireFirstGesture(fn){
          const once = async () => { off(); await fn(); };
          const off  = () => ['click','touchstart','keydown','scroll']
            .forEach(ev => window.removeEventListener(ev, once, { passive:true }));
          ['click','touchstart','keydown','scroll']
            .forEach(ev => window.addEventListener(ev, once, { passive:true, once:true }));
        }

        function upsertToggle(){
          let btn = document.getElementById('toggle-audio');
          if (!btn) {
            btn = document.createElement('button');
            btn.id = 'toggle-audio';
            btn.className = 'wm-speaker';
            btn.title = 'Music';
            document.body.appendChild(btn);
          } else {
            btn.classList.add('wm-speaker');
          }
          return btn;
        }

        const SVG_ON = `
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M11 5 7 9H3v6h4l4 4V5Z"
                  stroke="currentColor" stroke-width="1.6"
                  fill="none" stroke-linejoin="round"/>
            <path d="M17 9a5 5 0 0 1 0 6M20 7a8 8 0 0 1 0 10"
                  stroke="currentColor" stroke-width="1.6"
                  stroke-linecap="round" fill="none"/>
          </svg>`;
        const SVG_OFF = `
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M11 5 7 9H3v6h4l4 4V5Z"
                  stroke="currentColor" stroke-width="1.6"
                  fill="none" stroke-linejoin="round"/>
            <path d="M16 9l5 5m0-5-5 5"
                  stroke="currentColor" stroke-width="1.8"
                  stroke-linecap="round"/>
          </svg>`;

        function setIcon(btn, playing){
          btn.innerHTML = playing ? SVG_ON : SVG_OFF;
          btn.classList.toggle('playing', playing);
          btn.setAttribute('aria-label', playing ? 'Pause music' : 'Play music');
        }

        async function boot(){
          const audio = ensureAudio();
          const btn   = upsertToggle();

          audio.addEventListener('timeupdate', () => setLastT(audio.currentTime));
          audio.addEventListener('seeking',    () => setLastT(audio.currentTime));
          audio.addEventListener('play',       () => setWantsPlay(true));
          audio.addEventListener('pause',      () => setWantsPlay(false));

          audio.addEventListener('loadedmetadata', () => {
            const t = computeCurrentTime(audio.duration);
            try { audio.currentTime = t; } catch {}
          }, { once:true });

          setIcon(btn, !audio.paused);

          btn.addEventListener('click', async () => {
            if (audio.paused) {
              if (!getAnchor()) {
                setAnchor(Date.now() - Math.floor(audio.currentTime || 0) * 1000);
              }
              await startPlayback(audio);
            } else {
              try { audio.pause(); } catch {}
              setWantsPlay(false);
            }
            setIcon(btn, !audio.paused);
            try { navigator.vibrate && navigator.vibrate(8); } catch {}
          });

          if ('mediaSession' in navigator) {
            try {
              navigator.mediaSession.metadata = new MediaMetadata({
                title: 'Ceremony Prelude',
                artist: 'Whitney & Marc',
                album: 'Wedding Invitation'
              });
              navigator.mediaSession.setActionHandler('play',  () => startPlayback(audio));
              navigator.mediaSession.setActionHandler('pause', () => {
                try { audio.pause(); } catch {}
                setWantsPlay(false);
              });
            } catch {}
          }

          if (approved() && wantsPlaying()) {
            try {
              await startPlayback(audio);
            } catch {
              wireFirstGesture(() => startPlayback(audio));
            }
          } else if (!approved()) {
            wireFirstGesture(() => startPlayback(audio));
          }

          setInterval(() => {
            if (!audio.paused) setLastT(audio.currentTime);
          }, 1500);
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', boot, { once:true });
        } else {
          boot();
        }

        window.addEventListener('wm:page-swapped', () => setTimeout(boot, 30));
      })();
      } /* end boot guard */
    </script>

    <!-- Tiny preloader logic -->
    <script id="wm-lite-preloader-js">
      (function(){
        const el = document.getElementById('wm-lite-preloader');
        if(!el) return;

        let done = false;
        const MIN_SHOW  = 1400;  // at least this long
        const HARD_STOP = 3500;  // safety net
        const t0 = performance.now();

        function finish(){
          if(done) return;
          done = true;
          const wait = Math.max(0, MIN_SHOW - (performance.now()-t0));
          setTimeout(() => {
            el.classList.add('is-done');
            setTimeout(() => el.remove(), 500);
          }, wait);
        }

        window.addEventListener('load', finish, { passive:true });

        const hero = document.querySelector('.u-section-1 .u-image-1');
        if (hero && hero.decode) {
          hero.decode().catch(()=>{}).then(finish);
        }

        ['.u-group-1', '.u-group-2'].forEach(sel => {
          const btn = document.querySelector(sel);
          if (btn) btn.addEventListener('click', finish, { passive:true });
        });

        setTimeout(finish, HARD_STOP);

        if (document.readyState === 'complete') finish();
      })();
    </script>

  </body>
</html>
