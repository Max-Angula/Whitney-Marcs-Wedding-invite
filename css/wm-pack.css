/* --- Persistent UI + effects (non-destructive) --- */
:root{
  --wm-color:#3e2f1c;
}
#wm-persist{position:fixed;inset:auto 0 0 auto;z-index:9999;pointer-events:none}
#wm-toggle{
  position:fixed;right:20px;bottom:20px;pointer-events:auto;display:flex;align-items:center;gap:8px;
  background:rgba(255,255,255,.85);border:none;border-radius:8px;padding:10px 12px;box-shadow:0 4px 18px rgba(0,0,0,.18);
  font-family:'Playfair Display',serif;color:var(--wm-color);cursor:pointer;overflow:visible
}
#wm-toggle>span{line-height:0}
#wm-toggle::before{
  content:"";position:absolute;left:50%;top:50%;width:140%;height:140%;transform:translate(-50%,-50%) scale(.9);
  border-radius:999px;background:radial-gradient(circle, rgba(62,47,28,.18) 0%, rgba(62,47,28,0) 60%);opacity:0;pointer-events:none
}
#wm-toggle.playing::before{animation:wm-ring 2.6s ease-out infinite}
@keyframes wm-ring{0%{opacity:.22;transform:translate(-50%,-50%) scale(.9)}70%{opacity:.06}100%{opacity:0;transform:translate(-50%,-50%) scale(1.25)}}

/* Tap-to-enable overlay */
#wm-sound-overlay{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter:blur(3px);z-index:9998}
#wm-sound-overlay .card{background:#fff;color:var(--wm-color);padding:16px 22px;border-radius:12px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.2)}
#wm-sound-overlay .card button{margin-top:10px;border:none;background:var(--wm-color);color:#fff;padding:10px 16px;border-radius:10px;cursor:pointer;font-family:'Playfair Display',serif;display:inline-flex;align-items:center;gap:8px}

/* Cursor fireflies + bloom */
.wm-cursor-firefly{position:fixed;width:6px;height:6px;background:radial-gradient(circle,rgba(255,255,255,.95) 0%,rgba(255,255,255,0) 70%);border-radius:50%;pointer-events:none;z-index:999;filter:drop-shadow(0 0 6px rgba(255,255,255,.6));animation:wm-trail 3.8s ease-out forwards;mix-blend-mode:screen}
@keyframes wm-trail{0%{opacity:1;transform:scale(1)}50%{opacity:.6;transform:scale(1.3)}100%{opacity:0;transform:scale(.8)}}

#wm-lens{position:fixed;width:100px;height:100px;border-radius:50%;background:radial-gradient(circle, rgba(255,240,220,.25), transparent 70%);pointer-events:none;z-index:1;mix-blend-mode:soft-light;transition:transform .1s ease}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  #wm-toggle::before,.wm-cursor-firefly{animation:none !important}
}

.reveal {
  opacity: 0; transform: translateY(16px);
  transition: opacity .6s ease, transform .6s ease;
}
.reveal.in { opacity: 1; transform: translateY(0); }

:root{ --wm-green:#486b49; }

a.u-btn, .u-btn, button, .u-link, a[href]{
  transition: transform .18s ease, box-shadow .18s ease;
}
a.u-btn:hover, .u-btn:hover, button:hover, .u-link:hover, a[href]:hover{
  transform: translateY(-1px);
  box-shadow: 0 6px 18px rgba(72,107,73,.18);
}

.wm-ripple{
  position: fixed; inset: 0; pointer-events: none;
}
.wm-r{ position:absolute; width:10px; height:10px; border-radius:50%;
  border:2px solid rgba(72,107,73,.35); transform:translate(-50%,-50%) scale(.6);
  opacity:.8; animation:wmRipple .6s ease-out forwards;
}
@keyframes wmRipple{
  to{ transform:translate(-50%,-50%) scale(10); opacity:0; }
}

/* Top scroll progress line (subtle + elegant) */
#wm-progress {
  position: fixed;
  left: 0; top: 0;
  height: 3px;
  width: 100%;
  z-index: 10000;            /* above everything */
  pointer-events: none;
  transform: scaleX(0);
  transform-origin: 0 50%;
  opacity: 0;
  transition: opacity .3s ease;
  /* warm gradient to match the palette */
  background: linear-gradient(90deg, rgba(245,214,200,.95) 0%, rgba(110,86,58,.9) 100%);
  mix-blend-mode: multiply;  /* keeps it gentle over light bkgs */
}

/* show only while scrolling */
body.wm-scrolling #wm-progress { opacity: 1; }

/* motion sensitivity */
@media (prefers-reduced-motion: reduce){
  #wm-progress { transition: none; }
}

#wm-top {
  position: fixed; left: 16px; bottom: 16px; z-index: 10000;
  width: 44px; height: 44px; border-radius: 999px; border: 0;
  background: #fff; box-shadow: 0 8px 22px rgba(0,0,0,.18);
  display: grid; place-items: center; cursor: pointer; opacity: 0; transform: translateY(8px);
  transition: opacity .2s ease, transform .2s ease, box-shadow .2s ease;
}
#wm-top.show { opacity: 1; transform: translateY(0); }
#wm-top:before {
  content: "â¤’"; font-size: 20px; filter: saturate(1.1);
}
#wm-top:hover { box-shadow: 0 10px 28px rgba(0,0,0,.25); }

/* Hide the old text arrow so only the SVG shows */
#wm-top::before { content: none !important; }

/* pick a visible color for the icon */
#wm-top { color: #1f2b22; }   /* or your green: #607457 */
#wm-top svg { display:block; } /* avoids any inline-gap quirks */
